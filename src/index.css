@import url('https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600&family=Instrument+Serif:ital@0;1&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;


:root {
  --topbar-overlay-color: 255, 255, 255;
  --topbar-overlay-max-opacity: 0.6;
}

.dark {
  --topbar-overlay-color: 0, 0, 0;
  --topbar-overlay-max-opacity: 0.4;
}

@layer base {
  body {
    font-family: "Instrument Serif", serif, sans-serif;
    font-weight: 400;
    font-style: normal;
    letter-spacing: normal;
    background-color: #fefcf9;
  }

  /* Text selection highlight - yellow */
  ::selection {
    background-color: #fdfc47;
    color: #1a1a1a;
  }

  .dark ::selection {
    background-color: #fae915;
    color: #1a1a1a;
  }

  p, li, span, button, a, input, textarea, label {
    font-family: "Instrument Sans", system-ui, sans-serif;
  }

  /* Nav elements should use serif */
  nav a, nav button, nav span {
    font-family: "Instrument Serif", serif;
  }

  /* Buttons and links should not be text-selectable */
  button, a {
    user-select: none;
  }

  h1 {
    font-size: 3rem; /* text-5xl */
    line-height: 1;
    font-weight: 700;
    margin-bottom: 2.5rem;
  }

  h2 {
    font-size: 1.5rem; /* text-2xl */
    line-height: 2rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .dark body {
    background-color: #1a1a1a;
    color: #f5f5f5;
  }
}

/* Soft Diffused Gradient Background */
.gradient-bg {
  position: relative;
  isolation: isolate;
}

.gradient-bg::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  /*
   * Using oklch() for perceptually uniform color blending
   * Multiple radial gradients layered for organic, diffused effect
   */
  background:
    /* === TOP-LEFT GRADIENT BLOB === */
    /* Core warm center - bright lemon yellow */
    radial-gradient(
      ellipse 45% 50% at 25% 30%,
      oklch(95% 0.18 100 / 0.4) 0%,
      oklch(93% 0.15 98 / 0.3) 30%,
      transparent 70%
    ),
    /* Secondary yellow layer - offset for organic shape */
    radial-gradient(
      ellipse 55% 60% at 20% 35%,
      oklch(94% 0.14 100 / 0.3) 0%,
      oklch(92% 0.10 98 / 0.15) 40%,
      transparent 75%
    ),
    /* Soft yellow outer glow */
    radial-gradient(
      ellipse 65% 70% at 22% 28%,
      oklch(96% 0.10 100 / 0.22) 0%,
      oklch(97% 0.06 98 / 0.1) 50%,
      transparent 80%
    ),
    /* === BOTTOM-RIGHT GRADIENT BLOB === */
    /* Core warm center - bright lemon yellow */
    radial-gradient(
      ellipse 40% 45% at 82% 78%,
      oklch(95% 0.16 100 / 0.35) 0%,
      oklch(93% 0.12 98 / 0.25) 35%,
      transparent 70%
    ),
    /* Outer yellow glow */
    radial-gradient(
      ellipse 50% 55% at 85% 82%,
      oklch(96% 0.10 100 / 0.2) 0%,
      oklch(97% 0.06 98 / 0.1) 45%,
      transparent 75%
    );

  /* CSS blur for ultra-soft diffusion */
  filter: blur(60px);

  /* Slight scale to hide blur edge artifacts */
  transform: scale(1.2);
}

/* Dark mode - gradient to transparent over solid background-color */
.dark .gradient-bg::before {
  /* Solid base color underneath */
  background-color: #1a1a1a;

  /* Gradients fade from warm color to transparent (single channel = smoother) */
  background-image:
    radial-gradient(
      ellipse at 25% 30%,
      hsl(30 35% 22%) 0%,
      transparent 70%
    ),
    radial-gradient(
      ellipse at 80% 75%,
      hsl(25 30% 20%) 0%,
      transparent 70%
    );

  /* Don't fill whole screen - helps with rendering */
  background-size: 80% 80%, 70% 70%;
  background-position: 0% 0%, 100% 100%;
  background-repeat: no-repeat;

  filter: blur(100px);
}

@layer utilities {
  .font-sans {
    font-family: "Instrument Serif", system-ui, -apple-system, sans-serif;
  }
}


/* Page fade-in transition */
@keyframes fade-in-up {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-page-enter {
  animation: fade-in-up 0.4s ease-out;
}

/* Image fade-in on load */
.img-fade {
  opacity: 0;
  transition: opacity 0.4s ease-out;
}

.img-fade.loaded {
  opacity: 1;
}

/* ========================================
   Lexical Editor Styles
   ======================================== */

/* Main editor container */
.editor-container {
  border: 1px solid #d4d4d4;
  border-radius: 0.5rem;
  overflow: hidden;
  background: white;
  display: flex;
  flex-direction: column;
}

.editor-container.dark {
  border-color: #404040;
  background: #171717;
}

/* Toolbar */
.editor-toolbar {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem;
  background: #fafafa;
  border-bottom: 1px solid #e5e5e5;
  flex-wrap: wrap;
}

.editor-container.dark .editor-toolbar {
  background: #262626;
  border-bottom-color: #404040;
}

.toolbar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  padding: 0;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 0.25rem;
  color: #525252;
  cursor: pointer;
  transition: all 0.15s ease;
}

.toolbar-button:hover:not(:disabled) {
  background: #e5e5e5;
  color: #171717;
}

.toolbar-button.active {
  background: #d4d4d4;
  color: #171717;
}

.toolbar-button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.editor-container.dark .toolbar-button {
  color: #a3a3a3;
}

.editor-container.dark .toolbar-button:hover:not(:disabled) {
  background: #404040;
  color: #f5f5f5;
}

.editor-container.dark .toolbar-button.active {
  background: #525252;
  color: #f5f5f5;
}

.toolbar-separator {
  width: 1px;
  height: 1.5rem;
  background: #e5e5e5;
  margin: 0 0.375rem;
}

.editor-container.dark .toolbar-separator {
  background: #404040;
}

/* Inner editor wrapper */
.editor-inner {
  position: relative;
  background: white;
}

.editor-container.dark .editor-inner {
  background: #171717;
}

/* Content editable input */
.editor-input {
  min-height: var(--editor-min-height, 300px);
  padding: 1rem;
  outline: none;
  font-family: "Instrument Sans", system-ui, sans-serif;
  font-size: 1rem;
  line-height: 1.625;
  color: #374151;
  resize: none;
  caret-color: #111827;
  /* Critical for content/editable behavior */
  position: relative;
  tab-size: 1;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
  -webkit-user-modify: read-write;
}

.editor-container.dark .editor-input {
  color: #d1d5db;
  caret-color: #f5f5f5;
}

/* Placeholder */
.editor-placeholder {
  position: absolute;
  top: 1rem;
  left: 1rem;
  color: #9ca3af;
  pointer-events: none;
  font-family: "Instrument Sans", system-ui, sans-serif;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.editor-container.dark .editor-placeholder {
  color: #6b7280;
}

.lexical-root {
  outline: none;
}

/* Typography styles */
.lexical-paragraph {
  margin: 0;
  margin-bottom: 0.5em;
  position: relative;
}

.lexical-h1 {
  font-size: 2rem;
  font-weight: 700;
  margin: 1.5em 0 0.5em;
  color: #111827;
  line-height: 1.2;
}

.lexical-h2 {
  font-size: 1.5rem;
  font-weight: 600;
  margin: 1.25em 0 0.5em;
  color: #111827;
  line-height: 1.3;
}

.lexical-h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 1em 0 0.5em;
  color: #111827;
  line-height: 1.4;
}

.editor-container.dark .lexical-h1,
.editor-container.dark .lexical-h2,
.editor-container.dark .lexical-h3 {
  color: #f3f4f6;
}

.lexical-quote {
  border-left: 3px solid #d4d4d4;
  padding-left: 1rem;
  margin: 1em 0;
  color: #6b7280;
  font-style: italic;
}

.editor-container.dark .lexical-quote {
  border-left-color: #525252;
  color: #9ca3af;
}

.lexical-ul {
  padding-left: 1.5em;
  margin: 0.75em 0;
  list-style-type: disc;
  list-style-position: inside;
}

.lexical-ol {
  padding-left: 1.5em;
  margin: 0.75em 0;
  list-style-type: decimal;
  list-style-position: inside;
}

.lexical-li {
  margin: 0.25em 0;
  display: list-item;
}

.lexical-link {
  color: #2563eb;
  text-decoration: underline;
  cursor: pointer;
}

.editor-container.dark .lexical-link {
  color: #60a5fa;
}

.lexical-bold {
  font-weight: 700;
}

.lexical-italic {
  font-style: italic;
}

.lexical-underline {
  text-decoration: underline;
}

.lexical-strikethrough {
  text-decoration: line-through;
}

/* Code blocks */
.lexical-code {
  background: #f3f4f6;
  font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, monospace;
  font-size: 0.875rem;
  padding: 1rem;
  margin: 0.75em 0;
  border-radius: 0.375rem;
  overflow-x: auto;
  tab-size: 2;
}

.editor-container.dark .lexical-code {
  background: #1f2937;
}

/* Inline code */
.lexical-text-code {
  background: #f3f4f6;
  font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, monospace;
  font-size: 0.875em;
  padding: 0.125em 0.375em;
  border-radius: 0.25rem;
  color: #dc2626;
}

.editor-container.dark .lexical-text-code {
  background: #374151;
  color: #f87171;
}

/* Subscript & Superscript */
.lexical-subscript {
  font-size: 0.75em;
  vertical-align: sub;
}

.lexical-superscript {
  font-size: 0.75em;
  vertical-align: super;
}

/* Highlight */
.lexical-highlight {
  background: #fef08a;
  padding: 0.125em 0;
}

.editor-container.dark .lexical-highlight {
  background: #854d0e;
  color: #fef9c3;
}

/* Horizontal Rule */
.lexical-hr {
  border: none;
  border-top: 2px solid #d4d4d4;
  margin: 1.5em 0;
  padding: 0;
  cursor: default;
}

.editor-container.dark .lexical-hr {
  border-top-color: #525252;
}

/* Code syntax highlighting tokens */
.lexical-tokenComment {
  color: #708090;
}

.lexical-tokenPunctuation {
  color: #999999;
}

.lexical-tokenProperty {
  color: #905;
}

.lexical-tokenSelector {
  color: #690;
}

.lexical-tokenOperator {
  color: #9a6e3a;
}

.lexical-tokenAttr {
  color: #07a;
}

.lexical-tokenVariable {
  color: #e90;
}

.lexical-tokenFunction {
  color: #dd4a68;
}

.editor-container.dark .lexical-tokenComment {
  color: #8b949e;
}

.editor-container.dark .lexical-tokenPunctuation {
  color: #c9d1d9;
}

.editor-container.dark .lexical-tokenProperty {
  color: #79c0ff;
}

.editor-container.dark .lexical-tokenSelector {
  color: #a5d6ff;
}

.editor-container.dark .lexical-tokenOperator {
  color: #ff7b72;
}

.editor-container.dark .lexical-tokenAttr {
  color: #d2a8ff;
}

.editor-container.dark .lexical-tokenVariable {
  color: #ffa657;
}

.editor-container.dark .lexical-tokenFunction {
  color: #d2a8ff;
}

/* ===========================================
   Tailwind Prose Overrides
   Makes prose code styling match Lexical editor
   =========================================== */

/* Inline code - match Lexical editor style */
.prose :where(code):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #f3f4f6;
  font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, monospace;
  font-size: 0.875em;
  padding: 0.125em 0.375em;
  border-radius: 0.25rem;
  color: #dc2626;
  font-weight: 400;
}

.prose :where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))::before,
.prose :where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))::after {
  content: "";
}

.dark .prose :where(code):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #374151;
  color: #f87171;
}

/* Code blocks - match Lexical editor style */
.prose :where(pre):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #f3f4f6;
  font-family: "SF Mono", "Fira Code", "Fira Mono", Menlo, monospace;
  border-radius: 0.375rem;
}

.dark .prose :where(pre):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #1f2937;
}

.prose :where(pre code):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: transparent;
  color: inherit;
  padding: 0;
}

/* Blockquotes - match Lexical editor style */
.prose :where(blockquote):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  border-left-color: #d1d5db;
  font-style: italic;
}

.dark .prose :where(blockquote):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  border-left-color: #525252;
}

/* Horizontal rule - match Lexical editor style */
.prose :where(hr):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  border-top-color: #d4d4d4;
}

.dark .prose :where(hr):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  border-top-color: #525252;
}

/* Links - match Lexical editor style */
.prose :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  color: #2563eb;
}

.dark .prose :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  color: #60a5fa;
}

/* Mark/Highlight */
.prose :where(mark):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #fef08a;
  padding: 0.125em 0;
}

.dark .prose :where(mark):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
  background: #854d0e;
  color: #fef9c3;
}